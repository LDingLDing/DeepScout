# 移动端适配指南

## 设计理念

系统采用"移动优先"(Mobile First)的设计理念，在保证 PC 端完整功能的同时，优化移动端用户体验。我们遵循以下原则：

1. **简洁至上**：移动端界面保持简洁，减少视觉干扰
2. **触控友好**：按钮、输入框等交互元素尺寸合理，便于触控操作
3. **渐进增强**：基础功能在所有设备上可用，高级功能在大屏设备上逐步增强
4. **一致体验**：保持跨设备的品牌和功能一致性

## 技术实现

### 响应式框架

前端使用 Ant Design 组件库结合 Grid 系统实现响应式布局：

```tsx
// 使用 Grid 系统检测屏幕尺寸
const { useBreakpoint } = Grid;

function Component() {
  const screens = useBreakpoint();
  
  return (
    <div>
      {screens.md ? (
        <PCVersionComponent />
      ) : (
        <MobileVersionComponent />
      )}
    </div>
  );
}
```

### 断点设置

系统使用以下断点设置：

| 断点名称 | 屏幕宽度 | 设备类型 |
|---------|---------|---------|
| xs      | < 576px  | 手机竖屏 |
| sm      | ≥ 576px  | 手机横屏 |
| md      | ≥ 768px  | 平板    |
| lg      | ≥ 992px  | 小屏电脑 |
| xl      | ≥ 1200px | 大屏电脑 |
| xxl     | ≥ 1600px | 超大屏幕 |

### 布局适配

#### 1. 导航结构

- **PC 端**：使用侧边栏导航，可折叠
- **移动端**：使用抽屉式导航，通过顶部按钮触发

```tsx
// MainLayout.tsx 中的导航适配
{screens.md ? (
  <Sider collapsible collapsed={collapsed} onCollapse={setCollapsed}>
    {/* PC端侧边栏内容 */}
  </Sider>
) : (
  <Drawer
    title="InfoRadar"
    placement="left"
    onClose={() => setDrawerVisible(false)}
    open={drawerVisible}
  >
    {/* 移动端抽屉菜单内容 */}
  </Drawer>
)}
```

#### 2. 内容区域

- **PC 端**：宽松布局，多列展示
- **移动端**：紧凑布局，单列展示

```tsx
<Content style={{ 
  margin: screens.md ? '16px 16px' : '8px 8px',
  padding: screens.md ? 24 : 16 
}}>
  {/* 内容区域 */}
</Content>
```

#### 3. 数据展示

- **PC 端**：使用表格展示数据
- **移动端**：使用列表展示数据

```tsx
{screens.md ? (
  <Table columns={columns} dataSource={data} />
) : (
  <List
    dataSource={data}
    renderItem={(item) => (
      <List.Item>
        <List.Item.Meta
          title={item.title}
          description={item.description}
        />
      </List.Item>
    )}
  />
)}
```

## 组件适配指南

### 1. 表单组件

移动端表单采用分步设计，减少单屏内容量：

```tsx
// 分步表单示例
<Steps current={currentStep}>
  <Step title="基本信息" />
  <Step title="监控目标" />
  <Step title="提取规则" />
</Steps>

<div style={{ display: currentStep === 0 ? 'block' : 'none' }}>
  {/* 第一步表单内容 */}
</div>

<div style={{ display: currentStep === 1 ? 'block' : 'none' }}>
  {/* 第二步表单内容 */}
</div>
```

### 2. 按钮组件

移动端按钮尺寸和排列方式优化：

```tsx
<Button
  type="primary"
  size={screens.md ? 'middle' : 'large'}
  block={!screens.md}
>
  提交
</Button>
```

### 3. 卡片组件

移动端卡片内边距减小，节省空间：

```tsx
<Card
  style={{ marginBottom: 16 }}
  bodyStyle={{ padding: screens.md ? 24 : 12 }}
>
  {/* 卡片内容 */}
</Card>
```

### 4. 标签页组件

移动端标签页样式简化：

```tsx
<Tabs
  defaultActiveKey="1"
  type={screens.md ? "card" : "line"}
>
  <TabPane tab="标签1" key="1">
    内容1
  </TabPane>
  <TabPane tab="标签2" key="2">
    内容2
  </TabPane>
</Tabs>
```

## 交互优化

### 1. 触控区域

确保所有可点击元素有足够的触控区域（至少 44x44 像素）：

```tsx
<Button
  style={{ 
    minHeight: !screens.md ? '44px' : 'auto',
    minWidth: !screens.md ? '44px' : 'auto'
  }}
>
  点击
</Button>
```

### 2. 手势支持

添加常见手势支持，如滑动切换：

```tsx
// 使用 react-swipeable 等库实现滑动支持
<Swipeable
  onSwipedLeft={() => handleNext()}
  onSwipedRight={() => handlePrev()}
>
  {/* 内容 */}
</Swipeable>
```

### 3. 反馈机制

提供明确的触控反馈：

```tsx
<Button
  onClick={() => {
    // 触发振动反馈（如果设备支持）
    if (navigator.vibrate) {
      navigator.vibrate(10);
    }
    // 执行操作
    handleAction();
  }}
>
  操作
</Button>
```

## 性能优化

### 1. 图片优化

使用响应式图片，根据设备加载不同尺寸：

```tsx
<img
  src={screens.md ? highResImage : lowResImage}
  alt="示例图片"
  loading="lazy"
/>
```

### 2. 组件懒加载

移动端使用懒加载减少初始加载时间：

```tsx
// 使用 React.lazy 和 Suspense
const HeavyComponent = React.lazy(() => import('./HeavyComponent'));

// 在组件中
<Suspense fallback={<Spin />}>
  <HeavyComponent />
</Suspense>
```

### 3. 虚拟列表

长列表使用虚拟滚动提高性能：

```tsx
// 使用 react-window 等库实现虚拟列表
<List
  itemCount={1000}
  height={500}
  itemSize={50}
  width="100%"
  itemData={items}
>
  {({ index, style, data }) => (
    <div style={style}>
      {data[index].name}
    </div>
  )}
</List>
```

## 测试与调试

### 设备测试

确保在以下设备类型上测试：
- 小屏手机（iPhone SE 尺寸）
- 大屏手机（iPhone Pro Max 尺寸）
- 平板设备（iPad 尺寸）
- 桌面浏览器（各种窗口尺寸）

### 浏览器开发工具

使用浏览器开发工具的设备模拟功能：
- Chrome DevTools 的 Device Mode
- 测试不同网络条件（3G, 4G）
- 测试不同 DPI 屏幕

### 常见问题排查

1. **溢出问题**：检查内容是否溢出屏幕
   ```css
   /* 添加以下样式进行调试 */
   * {
     outline: 1px solid red;
     overflow: visible !important;
   }
   ```

2. **触控区域**：检查小元素是否难以点击
   ```css
   /* 临时增大触控区域进行测试 */
   .small-target {
     position: relative;
   }
   .small-target::after {
     content: '';
     position: absolute;
     top: -10px; right: -10px; bottom: -10px; left: -10px;
   }
   ```

## 最佳实践

1. **优先设计移动端**：先完成移动端设计，再扩展到大屏幕
2. **渐进增强**：确保核心功能在所有设备上可用，高级功能可选
3. **定期测试**：在真实设备上定期测试，不仅依赖模拟器
4. **性能预算**：设定性能目标，如首屏加载时间不超过 3 秒
5. **用户反馈**：收集真实用户的使用反馈，持续优化

---

© 2025 InfoRadar 信息雷达 | 版本：1.0.0
